"use strict";(self.webpackChunkitaap_ms_manager=self.webpackChunkitaap_ms_manager||[]).push([[306],{6646:(v,d,i)=>{i.d(d,{z:()=>r});var l=i(8256),c=i(529),t=i(2543);class r{constructor(n,a){this.httpClient=n,this.constants=a}getVariableGroups(){return this.httpClient.get(this.constants.hostname+"getAllVariableGroups?organization="+this.constants.org+"&api-version="+this.constants.apiV,this.constants.headerOptions)}fetchVariablesFromGroup(n){let a=this.constants.hostname+"getVariableUsingGroupName?groupName="+n+"&organization="+this.constants.org+"&api-version="+this.constants.apiV;return console.log("url : "+a),this.httpClient.get(a,this.constants.headerOptions)}sendVarGrpForApproval(n){return this.httpClient.post(this.constants.hostname+"routeToApproval",n,this.constants.headerOptions)}getRequests(n){return this.httpClient.get(this.constants.hostname+"fetchRequests/"+n,this.constants.headerOptions)}approveRequest(n){return this.httpClient.post(this.constants.hostname+"approveRequest",n,this.constants.headerOptions)}rejectRequest(n){return this.httpClient.post(this.constants.hostname+"rejectRequest",n,this.constants.headerOptions)}getTasksAssignedToSelf(n){return this.httpClient.get(this.constants.hostname+"user/tasks/userId?userId="+n,this.constants.headerOptions)}getMyRequests(n){return this.httpClient.get(this.constants.hostname+"my-requests/"+n,this.constants.headerOptions)}}r.\u0275fac=function(n){return new(n||r)(l.LFG(c.eN),l.LFG(t.g))},r.\u0275prov=l.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})},6306:(v,d,i)=>{i.r(d),i.d(d,{MyRequestsRoutingModule:()=>u});var l=i(2386),c=i(805),t=i(8256),r=i(6646),m=i(6895),n=i(433),a=i(4247),f=i(5593),y=i(1989),g=i(6125),q=i(2453),R=i(6679);function Z(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7),t._UZ(2,"i",8),t.TgZ(3,"h4"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.qZA()(),t.TgZ(7,"div",9)(8,"div",10)(9,"button",11),t.NdJ("click",function(){t.CHM(e);const S=t.oxw();return t.KtG(S.onRetry())}),t.qZA()()()()}if(2&o){const e=s.$implicit;t.xp6(4),t.Oqu(e.summary),t.xp6(2),t.Oqu(e.detail)}}function x(o,s){1&o&&(t.TgZ(0,"tr")(1,"th",19),t._uU(2,"Name "),t._UZ(3,"p-columnFilter",20),t.qZA(),t.TgZ(4,"th",21),t._uU(5,"Value"),t.qZA(),t.TgZ(6,"th",22),t._uU(7,"Secret"),t.qZA()())}function A(o,s){if(1&o&&(t.TgZ(0,"tr")(1,"td",23),t._uU(2),t.qZA(),t.TgZ(3,"td",23,24),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._UZ(7,"p-checkbox",25),t.qZA()()),2&o){const e=s.$implicit,h=t.oxw(2);t.xp6(2),t.Oqu(e.key),t.xp6(3),t.Oqu(e.value),t.xp6(2),t.Q6J("binary",!0)("ngModel",h.fetchValues(e,"secret"))("disabled",!0)}}function T(o,s){if(1&o&&(t.TgZ(0,"div",26)(1,"div",27)(2,"p"),t._uU(3),t.qZA()()()),2&o){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.requestDate)}}const M=function(){return{width:"1510px"}},_=function(){return{"table-layout":"fixed","min-width":"75rem"}},b=function(){return["key"]};function O(o,s){if(1&o&&(t.TgZ(0,"div")(1,"p-card",12),t._UZ(2,"p-tag",13)(3,"br")(4,"br"),t.TgZ(5,"p"),t._uU(6),t.qZA(),t.TgZ(7,"div")(8,"p-table",14,15),t.YNc(10,x,8,0,"ng-template",16),t.YNc(11,A,8,5,"ng-template",17),t.qZA(),t.YNc(12,T,4,1,"ng-template",18),t.qZA()(),t._UZ(13,"br"),t.qZA()),2&o){const e=s.$implicit,h=t.oxw();t.xp6(1),t.Akn(t.DdM(11,M)),t.xp6(1),t.s9C("value",e.status),t.Q6J("severity",h.getSeverity(e))("icon",h.getSeverityIcon(e)),t.xp6(4),t.Oqu(e.azureGroupName),t.xp6(2),t.Q6J("value",e.modifiedVariables)("rowHover",!0)("scrollable",!0)("tableStyle",t.DdM(12,_))("globalFilterFields",t.DdM(13,b))}}class p{constructor(s,e){this.azureService=s,this.messageService=e,this.requester="Soumendu",this.allRequests=[]}ngOnInit(){console.log("in init"),this.getMyRequests()}getMyRequests(){this.azureService.getMyRequests(this.requester).subscribe(s=>{console.log("response : "+s),this.handleSuccessfulResponse(s),this.messageService.add({key:"success",severity:"success",summary:"Success",detail:"Successfully Fetched "+this.allRequests.length+" Requests"})},s=>{console.log("error : "+s),this.httpError=s,this.messageService.add({key:"retry",severity:"error",sticky:!0,summary:s.statusText,detail:s.message})})}handleSuccessfulResponse(s){if(this.allRequests=s,s.length>0)for(let e=0;e<this.allRequests.length;e++)this.allRequests[e].modifiedVariables=JSON.parse(this.allRequests[e].modifiedVariables),this.allRequests[e].updatedAllVariables=JSON.parse(this.allRequests[e].updatedAllVariables),this.allRequests[e].isApproved="Approved"===this.allRequests[e].status,this.allRequests[e].isRejected="Rejected"===this.allRequests[e].status,this.allRequests[e].isInitiated="Initiated"===this.allRequests[e].status}getSeverity(s){return s.isApproved?"success":s.isInitiated?"info":"danger"}getSeverityIcon(s){return s.isApproved?"pi pi-check-circle":s.isInitiated?"pi pi-clock":"pi pi-times-circle"}onRetry(){this.getMyRequests(),this.messageService.clear("retry")}fetchValues(s,e){return s[e]}}p.\u0275fac=function(s){return new(s||p)(t.Y36(r.z),t.Y36(c.ez))},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-my-requests"]],features:[t._Bn([c.ez])],decls:12,vars:2,consts:[["key","success"],["key","retry"],["pTemplate","message"],[1,"text-900","font-medium","text-2xl","textOverflow"],[4,"ngFor","ngForOf"],[1,"block","text-500","font-medium","text-xl","mb-3"],[1,"flex","flex-column",2,"flex","1"],[1,"text-center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3rem"],[1,"grid","p-fluid"],[1,"col-12"],["type","button","icon","pi pi-refresh","pButton","","label","Retry",1,"p-button-danger",3,"click"],["styleClass","p-card-shadow"],[3,"value","severity","icon"],["scrollHeight","45vh","styleClass","p-datatable-sm",3,"value","rowHover","scrollable","tableStyle","globalFilterFields"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[2,"width","40%"],["type","text","field","key","display","menu"],[2,"width","70%"],[2,"width","20%"],[1,"textOverflow"],["variableValue",""],[3,"binary","ngModel","disabled"],[1,"flex"],[1,"ml-auto"]],template:function(s,e){1&s&&(t._UZ(0,"p-toast")(1,"p-toast",0),t.TgZ(2,"p-toast",1),t.YNc(3,Z,10,2,"ng-template",2),t.qZA(),t.TgZ(4,"div",3),t._uU(5,"My Requests"),t.qZA(),t._UZ(6,"br")(7,"br"),t.YNc(8,O,14,14,"div",4),t.TgZ(9,"div")(10,"span",5),t._uU(11),t.qZA()()),2&s&&(t.xp6(8),t.Q6J("ngForOf",e.allRequests),t.xp6(3),t.Oqu(0===e.allRequests.length?"No Requests Found.":""))},dependencies:[m.sg,n.JJ,n.On,a.Z,c.jx,f.Hq,y.XZ,g.iA,g.xl,q.FN,R.V],encapsulation:2});const C=[{path:"my-requests",component:p}];class u{}u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[l.Bz.forChild(C),l.Bz]})}}]);
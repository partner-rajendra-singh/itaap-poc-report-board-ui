<div class="grid">
  <!-- <div class="col-12 pb-0">
    <div class="text-900 font-medium text-3xl">Tasks</div>
  </div> -->
  <div class="col-12">
    <div class="card p-0 grid grid-nogutter">
      <div class="col-12 md:col-6 lg:col-3 py-5 px-6 border-none md:border-right-1 surface-border"
        style="background: linear-gradient(226.42deg, #0F5F4B 8.93%, #09152F 110.98%);border-top-left-radius: inherit;border-bottom-left-radius: inherit;">
        <div class="flex align-items-center justify-content-between">
          <div class="flex align-items-center">
            <p-avatar size="large" shape="circle" styleclass="tasks-badge status-completed" class="p-element">
              <div class="tasks-badge status-completed p-avatar p-component p-avatar-circle p-avatar-lg">
                <span class="material-symbols-outlined p-avatar-icon">
                  task_alt
                </span>
              </div>
            </p-avatar>
            <span class="text-white text-xl ml-2">Completed</span>
          </div>
          <div class="flex align-items-center">
            <span class="block text-white font-bold text-6xl">{{allCompletedTasks.length}}</span>
          </div>
        </div>
      </div>
      <div class="col-12 md:col-6 lg:col-3 py-5 px-6 border-none md:border-right-1 surface-border"
        style="background: linear-gradient(226.42deg, #1B4963 8.93%, #09152F 110.98%);">
        <div class="flex align-items-center justify-content-between">
          <div class="flex align-items-center">
            <p-avatar size="large" shape="circle" styleclass="tasks-badge status-inprogress" class="p-element">
              <div class="tasks-badge status-inprogress p-avatar p-component p-avatar-circle p-avatar-lg">
                <span class="material-symbols-outlined p-avatar-icon">
                  rotate_right
                </span>
              </div>
            </p-avatar>
            <span class="text-white text-xl ml-2">In Progress</span>
          </div>
          <div class="flex align-items-center justify-content-between">
            <span class="block text-white font-bold text-6xl">{{allInProgressTasks.length}}</span>
          </div>
        </div>
      </div>
      <div class="col-12 md:col-6 lg:col-3 py-5 px-6 border-none md:border-right-1 surface-border"
        style="background: linear-gradient(226.42deg, #7c4913 8.93%, #2f1b09 110.98%);">
        <div class="flex align-items-center justify-content-between">
          <div class="flex align-items-center">
            <p-avatar size="large" shape="circle" styleclass="tasks-badge status-overdue" class="p-element">
              <div class="tasks-badge status-overdue p-avatar p-component p-avatar-circle p-avatar-lg">
                <span class="material-symbols-outlined p-avatar-icon">
                  running_with_errors
                </span>
              </div>
            </p-avatar>
            <span class="text-xl text-white ml-2">Overdue</span>
          </div>
          <div class="flex align-items-center justify-content-between">
            <span class="block text-white font-bold text-6xl">{{allOverDueTasks.length}}</span>
          </div>
        </div>
      </div>
      <div class="col-12 md:col-6 lg:col-3 py-5 px-6"
        style="background: linear-gradient(226.42deg, #801515 8.93%, #2F0909 110.98%);border-bottom-right-radius: inherit;border-top-right-radius: inherit;">
        <div class="flex align-items-center justify-content-between">
          <div class="flex align-items-center">
            <p-avatar size="large" shape="circle" styleclass="tasks-badge status-blocked" class="p-element">
              <div class="tasks-badge status-blocked p-avatar p-component p-avatar-circle p-avatar-lg">
                <span class="material-symbols-outlined p-avatar-icon">
                  block
                </span>
              </div>
            </p-avatar>
            <span class="text-xl text-white ml-2">Blocked</span>
          </div>
          <div class="flex align-items-center justify-content-between">
            <span class="block text-white font-bold text-6xl">{{allBlockedTasks.length}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12">

    <div>
      <h2>File List</h2>
      <ul>
        <li *ngFor="let file of uploadedFiles">
          {{ file.fileName }}
          <button (click)="downloadFile(file.id, file.fileName)">Download</button>
        </li>
      </ul>
    </div>
    

    <p-fileUpload name="files" (url)="fileUploadUrl" [multiple]="true" (onUpload)="onTemplatedUpload()" (onSelect)="onSelectedFiles($event)">
      <ng-template pTemplate="header" let-files let-chooseCallback="chooseCallback" let-clearCallback="clearCallback"
        let-uploadCallback="uploadCallback">
        <div class="flex flex-wrap justify-content-between align-items-center flex-1 gap-2">
          <div class="flex gap-2">
            <p-button (onClick)="choose($event, chooseCallback)" icon="pi pi-images" (rounded)="true"
              (outlined)="true"></p-button>
            <p-button (onClick)="uploadEvent(uploadCallback)" icon="pi pi-cloud-upload" (rounded)="true"
              (outlined)="true" severity="success" [disabled]="!files || files.length === 0" ></p-button>
            <p-button (onClick)="clearCallback()" icon="pi pi-times" (rounded)="true" (outlined)="true"
              severity="danger" [disabled]="!files || files.length === 0" ></p-button>
          </div>
          <!-- <p-progressBar [value]="totalSizePercent" [showValue]="false" styleClass="md:w-20rem h-1rem w-full md:ml-auto"
            [ngClass]="{ 'exceeded-progress-bar': totalSizePercent > 100 }">
            <span class="white-space-nowrap">{{ totalSize }}B / 1Mb</span>
          </p-progressBar> -->
        </div>
      </ng-template>
      <ng-template pTemplate="content" let-files let-uploadedFiles="uploadedFiles"
        let-removeFileCallback="removeFileCallback" let-removeUploadedFileCallback="removeUploadedFileCallback">
        <div *ngIf="files?.length > 0">
          <h5>Pending</h5>
          <div class="flex flex-wrap p-0 sm:p-5 gap-5">
            <div *ngFor="let file of files; let i = index"
              class="card m-0 px-6 flex flex-column border-1 surface-border align-items-center gap-3">
              <div>
                <img role="presentation" [alt]="file.name" [src]="file.objectURL" width="100" height="50" />
              </div>
              <span class="font-semibold">{{ file.name }}</span>
              <div>{{ formatSize(file.size) }}</div>
              <p-badge value="Pending" severity="warning" ></p-badge>
              <p-button icon="pi pi-times" (click)="onRemoveTemplatingFile($event, file, removeFileCallback, index)"
                (rounded)="true" (outlined)="true" severity="danger" />
            </div>
          </div>
        </div>
        <div *ngIf="uploadedFiles?.length > 0">
          <h5>Completed</h5>
          <div class="flex flex-wrap p-0 sm:p-5 gap-5">
            <div *ngFor="let file of uploadedFiles; let i = index"
              class="card m-0 px-6 flex flex-column border-1 surface-border align-items-center gap-3">
              <div>
                <img role="presentation" [alt]="file.name" [src]="file.objectURL" width="100" height="50" />
              </div>
              <span class="font-semibold">{{ file.name }}</span>
              <div>{{ formatSize(file.size) }}</div>
              <p-badge value="Completed" class="mt-3" severity="success"></p-badge>
              <p-button icon="pi pi-times" (onClick)="removeUploadedFileCallback(index)" (rounded)="true"
                (outlined)="true" severity="danger" />
            </div>
          </div>
        </div>
      </ng-template>
      <ng-template pTemplate="file"> </ng-template>
      <ng-template pTemplate="empty">
        <div class="flex align-items-center justify-content-center flex-column">
          <i class="pi pi-cloud-upload border-2 border-circle p-5 text-8xl text-400 border-400"></i>
          <p class="mt-4 mb-0">Drag and drop files to here to upload.</p>
        </div>
      </ng-template>
    </p-fileUpload>
    <!-- <p-fileUpload name="demo[]" url="http://localhost:9083/poc/upload-files" 
    (onUpload)="onUpload($event)"
      [multiple]="true">
      <ng-template pTemplate="content">
        <ul *ngIf="uploadedFiles.length">
          <li *ngFor="let file of uploadedFiles">
            {{ file.name }} - {{ file.size }} bytes
          </li>
        </ul>
      </ng-template>
    </p-fileUpload> -->
  </div>
</div>